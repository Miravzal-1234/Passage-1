<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Tunnelling under the Thames</title>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/>
<style>
        :root {
            --bg-color: #ffffff;
            --text-color: #333333;
            --passage-bg: #f8f9fa;
            --questions-bg: #ffffff;
            --border-color: #e0e0e0;
            --highlight-color: springgreen; /* Changed highlight color */
            
            /* New Header & Social Colors */
            --header-bg: #F8F8F8; /* Very light gray for header background */
            --header-text: #333333; /* Dark text for light header */
            --telegram-blue: #0088CC;
            --instagram-pink: #E4405F;
            --youtube-red: #FF0000;

            /* Button Colors (Red themed) */
            --button-bg: #CC0000; /* Primary button red */
            --button-hover: #A30000; /* Darker red on hover */
            
            --correct-color: #28a745; /* Standard green */
            --incorrect-color: #dc3545; /* Standard red */
            --progress-complete: #28a745;
            --progress-incomplete: #bdbdbd;

            /* Timer Colors (Red themed) */
            --timer-bg: #ffebee; /* Very light red/pink */
            --timer-text: #d32f2f; /* Darker red */

            --footer-bg: #f5f5f5;
        }

        .night-mode {
            --bg-color: #121212;
            --text-color: #e0e0e0;
            --passage-bg: #1e1e1e;
            --questions-bg: #1e1e1e;
            --border-color: #424242;
            --highlight-color: #2E8B57; /* Darker springgreen for night mode */
            
            /* Night Mode Header & Social Colors */
            --header-bg: #1a1a1a; /* Dark gray for header background */
            --header-text: #ffffff; /* White text for dark header */
            --telegram-blue: #005f99; /* Darker telegram blue */
            --instagram-pink: #b2334b; /* Darker instagram pink */
            --youtube-red: #b20000; /* Darker YouTube red */

            /* Night Mode Button Colors */
            --button-bg: #990000; /* Darker primary button red */
            --button-hover: #7a0000; /* Even darker red on hover */
            
            --correct-color: #218838; /* Darker green */
            --incorrect-color: #c82333; /* Darker red */
            --progress-complete: #218838;
            --progress-incomplete: #616161;

            /* Night Mode Timer Colors */
            --timer-bg: #420000; /* Dark red */
            --timer-text: #ffcdd2; /* Lighter red */

            --footer-bg: #121212;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            transition: background-color 0.3s, color 0.3s;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        header {
            background-color: var(--header-bg);
            color: var(--header-text);
            padding: 12px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            z-index: 100;
        }
        
        .logo-area {
            display: flex;
            align-items: center;
            gap: 15px; /* Space between social links */
        }
        
        .social-link {
            display: flex;
            align-items: center;
            gap: 8px; /* Space between icon and text */
            color: white; /* Text color is always white for social links */
            padding: 8px 15px;
            border-radius: 50px; /* Pill shape */
            text-decoration: none;
            font-weight: 600;
            font-size: 14px;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }

        .social-link:hover {
            transform: translateY(-1px);
        }

        .social-link i {
            font-size: 1.2em; /* Makes icon slightly larger than text */
        }

        /* Specific styling for social links */
        .social-link.telegram {
            background-color: var(--telegram-blue);
        }
        .social-link.telegram:hover {
            background-color: #007bb5; /* Slightly darker */
        }

        .social-link.instagram {
            background-color: var(--instagram-pink);
        }
        .social-link.instagram:hover {
            background-color: #d62976; /* Slightly darker */
        }

        .social-link.youtube {
            background-color: var(--youtube-red);
        }
        .social-link.youtube:hover {
            background-color: #CC0000; /* Slightly darker */
        }


        .header-controls {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .timer-container {
            background-color: var(--timer-bg);
            color: var(--timer-text);
            padding: 8px 15px;
            border-radius: 50px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .timer-controls {
            display: flex;
            gap: 8px;
        }

        .timer-controls button {
            background: none;
            border: none;
            color: var(--timer-text);
            cursor: pointer;
            font-size: 16px;
            padding: 4px;
            border-radius: 50%;
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .timer-controls button:hover {
            background-color: rgba(0,0,0,0.1); /* Darker hover for light timer */
        }
        .night-mode .timer-controls button:hover {
            background-color: rgba(255,255,255,0.2); /* Lighter hover for dark timer */
        }

        .mode-toggle {
            background: none;
            border: none;
            color: var(--header-text);
            cursor: pointer;
            font-size: 20px;
            padding: 6px;
            border-radius: 50%;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .mode-toggle:hover {
            background-color: rgba(0,0,0,0.1); /* Darker hover for light header */
        }
        .night-mode .mode-toggle:hover {
            background-color: rgba(255,255,255,0.2); /* Lighter hover for dark header */
        }

        main {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        .passage-container, .questions-container {
            height: 100%;
            overflow-y: auto;
            padding: 20px;
        }

        .passage-container {
            width: 50%;
            background-color: var(--passage-bg);
            border-right: 1px solid var(--border-color);
            position: relative;
        }

        .questions-container {
            width: 50%;
            background-color: var(--questions-bg);
        }

        .passage-content {
            max-width: 800px;
            margin: 0 auto;
        }

        .passage-title {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--text-color);
            padding-bottom: 10px;
            border-bottom: 2px solid var(--border-color);
        }

        .passage-text {
            font-size: 17px;
        }
        
        .question-text {
             font-size: 17px;
             line-height: 1.8; /* Increased line-height for fill-in-the-blank */
        }

        .passage-text p {
            margin-bottom: 20px;
            text-align: justify;
        }

        .highlight {
            background-color: var(--highlight-color);
            cursor: pointer;
        }

        .highlight-tooltip {
            position: absolute;
            background-color: #333;
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 14px;
            z-index: 1000;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .section-title {
            font-size: 18px;
            font-weight: 600;
            margin: 25px 0 15px;
            color: var(--text-color);
            padding-bottom: 8px;
            border-bottom: 1px solid var(--border-color);
        }

        .question-group {
            margin-bottom: 30px;
        }

        .question {
            margin-bottom: 25px;
            padding: 15px;
            border-radius: 8px;
            background-color: var(--passage-bg);
            border-left: 4px solid var(--border-color);
        }

        .question-title {
            font-weight: 600;
            margin-bottom: 12px;
            display: flex;
            align-items: baseline; /* Align baselines of number and text */
        }

        .question-number {
            display: inline-block;
            width: 28px;
            height: 28px;
            background-color: var(--progress-incomplete);
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 28px;
            margin-right: 10px;
            font-size: 14px;
            flex-shrink: 0;
        }

        .question.answered .question-number {
            background-color: var(--progress-complete);
        }

        .options {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-top: 8px;
        }

        .option {
            display: flex;
            align-items: center;
            cursor: pointer;
        }

        .option input {
            margin-right: 8px;
        }

        /* Styling for the new inline input fields */
        .fill-in-the-blank {
            background: transparent;
            border: none;
            border-bottom: 2px solid var(--text-color);
            width: 150px;
            font-family: inherit;
            font-size: 1em; /* Inherit font size from parent */
            color: inherit;
            padding: 0 4px 2px 4px; /* Add some padding */
            margin: 0 3px; /* Add some margin */
            vertical-align: baseline; /* Align with the text */
            text-align: center;
            outline: none;
            transition: border-color 0.3s;
        }

        .fill-in-the-blank:focus {
            border-bottom-color: var(--button-bg);
        }


        .instructions {
            font-size: 14px;
            color: #757575;
            margin-top: 5px;
            font-style: italic;
        }

        footer {
            background-color: var(--footer-bg);
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-top: 1px solid var(--border-color);
            box-shadow: 0 -2px 5px rgba(0,0,0,0.05);
        }

        .progress-container {
            display: flex;
            gap: 8px;
        }

        .progress-item {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background-color: var(--progress-incomplete);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .progress-item:hover {
            transform: scale(1.1);
        }

        .progress-item.completed {
            background-color: var(--progress-complete);
        }

        .action-buttons {
            display: flex;
            gap: 12px;
        }

        button {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
            transition: background-color 0.3s, border-color 0.3s, color 0.3s;
        }

        .btn-primary {
            background-color: var(--button-bg);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--button-hover);
        }

        .btn-secondary {
            background-color: transparent;
            border: 1px solid var(--button-bg); /* Use primary button color for border */
            color: var(--button-bg); /* Use primary button color for text */
        }

        .btn-secondary:hover {
            background-color: rgba(204, 0, 0, 0.1); /* Light red tint on hover */
        }
        .night-mode .btn-secondary:hover {
            background-color: rgba(153, 0, 0, 0.2); /* Darker red tint on hover for night mode */
        }


        .feedback-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            display: none; /* Hidden by default */
            justify-content: center;
            align-items: center;
        }

        .feedback-container {
            background-color: var(--passage-bg);
            width: 90%;
            max-width: 900px;
            height: 90%;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            display: flex;
            flex-direction: column;
        }

        .feedback-header {
            padding: 20px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .feedback-title {
            font-size: 22px;
            font-weight: 700;
            color: var(--text-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        #close-feedback {
            font-size: 24px;
            background: none;
            border: none;
            color: var(--text-color);
            cursor: pointer;
        }

        .score-display {
            font-size: 24px;
            font-weight: 700;
            margin-left: 10px;
        }
        
        .feedback-body {
            padding: 20px;
            overflow-y: auto;
        }

        .feedback-item {
            margin-bottom: 25px;
            padding: 15px;
            border-radius: 8px;
            background-color: var(--questions-bg);
        }

        .feedback-question {
            font-weight: 600;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }

        .feedback-answer {
            margin-bottom: 10px;
            padding: 8px 12px;
            border-radius: 4px;
            background-color: rgba(0,0,0,0.05);
        }

        .correct {
            color: var(--correct-color);
        }

        .incorrect {
            color: var(--incorrect-color);
        }

        .feedback-explanation {
            margin-top: 10px;
            padding: 10px;
            border-left: 3px solid var(--button-bg); /* Use primary button color for explanation border */
            background-color: rgba(0,0,0,0.03);
        }

        .feedback-passage {
            margin-top: 8px;
            font-style: italic;
            color: #757575;
        }

        /* Responsive Design */
        @media (max-width: 900px) {
            main {
                flex-direction: column;
            }
            
            .passage-container, .questions-container {
                width: 100%;
                height: 50%;
            }
            
            .passage-container {
                border-right: none;
                border-bottom: 1px solid var(--border-color);
            }
            
            .progress-container {
                flex-wrap: wrap;
                max-width: 60%;
            }
        }

        @media (max-width: 768px) {
             .logo-area {
                flex-wrap: wrap; /* Allow items to wrap to the next line */
                justify-content: center; /* Center items when wrapped */
                gap: 8px; /* Adjusted gap for smaller screens */
             }
             .social-link {
                padding: 6px 10px; /* Reduced padding for smaller screens */
                font-size: 13px; /* Reduced font size for smaller screens */
             }
             .social-link i {
                font-size: 1.1em; /* Slightly smaller icon */
             }
             .social-link span {
                display: inline; /* Ensure text is visible */
             }
        }


        @media (max-width: 600px) {
            header {
                flex-direction: column;
                gap: 10px;
                padding: 10px;
            }
            .header-controls {
                width: 100%;
                justify-content: space-around;
            }
            .progress-container {
                max-width: 50%;
            }
            .progress-item {
                width: 26px;
                height: 26px;
                font-size: 12px;
            }
            footer {
                flex-direction: column;
                gap: 15px;
            }
            .action-buttons {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
<header>
<div class="logo-area">
<!-- Removed the logo image tag as it was not opening -->



</div>
<div class="header-controls">
<div class="timer-container">
<i class="fas fa-clock"></i>
<span id="timer">20:00</span>
<div class="timer-controls">
<button id="start-timer" title="Start"><i class="fas fa-play"></i></button>
<button id="pause-timer" title="Pause"><i class="fas fa-pause"></i></button>
<button id="reset-timer" title="Reset"><i class="fas fa-redo"></i></button>
</div>
</div>
<button class="mode-toggle" id="night-mode-toggle" title="Toggle Night Mode">
<i class="fas fa-moon"></i>
</button>
</div>
</header>
<main>
<div class="passage-container" id="passage-container">
<div class="passage-content">
<div class="passage-title">Tunnelling under the Thames</div>
<div class="passage-text" id="passage-text"><p>At the beginning of the 19th century, the port of London was the busiest in the world. Cargoes that had travelled thousands of miles and survived all the hazards of the sea were unloaded on the banks of the Thames, only for their owners to discover that the most frustrating portion of their journey lay ahead. Consignments intended for the southern parts of Britain had to be lifted onto horse carts, pulled through the docks and across London Bridge, built in the 12th century and as impractical as its early date implies. By 1820, London Bridge had become the centre of the world's largest traffic jam.</p><p>It was an intolerable situation, and it was clear that if private enterprise could build another crossing closer to the docks, there would be good money to be made in tolls paid by users. Another bridge was out of the question, as this would deny sailing ships access to the city centre and ambitious men turned their thoughts to tunnelling beneath the Thames instead. This was not such an obvious idea as it might appear. Although increasing demand for coal had meant a great many tunnels had been dug in mines in Britain, working methods remained primitive. Tunnels were dug by men with simple tools, by candlelight. However, in 1807, a group of businessmen set themselves up as the Thames Archway Company. Their ambition was to tunnel below the Thames, but there was little to guide them as there had been no previous attempt to do this. Their chief engineer was Richard Trevithick, designer of the world's first high-pressure steam engine. His men made progress at the beginning, but then things began to go disastrously wrong, with muddy soil pouring into the tunnel. Eventually, the Thames Archway Company had had enough. Its funds were exhausted, Trevithick was sick from exposure to the river water, and its efforts had proved only that a passage under the river exceeded the limits of contemporary mining technology.</p><p>At that time, the only machines used in mines were pumps. It took a man of genius to recognise that a different sort of machine was needed, a machine that could prevent the roof and walls of a tunnel from collapsing. This man was Marc Brunel, a Frenchman who had become one of the most prominent engineers in Britain. Not long after the failure of the Thames Archway Company, Brunel saw a rotten piece of wood lying on the riverbank. Examining the wood through a magnifying glass, he observed it was infested with something that looked like a worm. Brunel realised that as it tunnelled through the wood, it would push chewed wood into its mouth and digest it, then excrete a hard substance that lined the new tunnel. Brunel realised that the worm's digging technique could be adapted to produce a new way of tunnelling. His realisation led him to invent a device that has been used in one form or another in most major tunnels built since – the tunnelling shield. It consisted of a heavy iron frame that could be pushed forward a few inches at a time. The front of the frame was made up of a series of iron frames that could be folded back to allow miners to dig the ground ahead. Behind these frames was a wall consisting of a series of iron plates pressed against the tunnel face and supported on a set of horizontal wooden planks, that would prevent the face from collapsing. It was a complex and rather cumbersome machine and not easy to use, but it seemed that it would protect the miners from the worst of the river's water. Brunel's team carefully examined earth samples taken from beneath the riverbed, and subsequently decided to dig the tunnel close to the muddy river bottom, where he could expect to find clay. This would be a more solid and safe substance to dig through than the sand that was found deeper down.</p><p>Brunel began work on his tunnel in 1825, but the problems of such an operation soon became apparent. Although the shield itself worked well, water began to drip into the tunnel. This was more of an annoyance than a danger while the pump was working, but this machine proved unreliable and sometimes failed altogether. When the pump broke down, work had to stop as the tunnel quickly flooded. There were occasions when the miners had to abandon their tools and flee for their lives. Even when Brunel's men were able to work, they had to run the constant risk of the pumps failing. They also complained of frequent headaches and dizziness, caused by the poor air quality. The air underground was dirty and stale, contaminated due to the lack of an adequate ventilation system. There were lighting problems too. Illuminating the tunnels by candlelight was a constant challenge. Lamps give off only a very weak glow, and there were a number of accidents because the miners could not see what they were doing. Lastly, a number of Brunel's miners walked off the job because they could not tolerate the excessive temperatures that developed in the cramped conditions underground.</p><p>Despite all these setbacks, the tunnel finally emerged on the opposite river bank on August 12, 1841. Brunel's triumph, however, was only partial. The small payment per person made by the thousands of visitors who flocked to see the marvel hardly paid even a penny per foot of the tunnel's construction costs. Brunel had gone bankrupt long before the project was completed, and the government loan he had required to complete the project had to be paid back with interest. As a result, there was not enough funding to make it accessible to horse-drawn vehicles, as intended. Instead, the passageways were filled with souvenir sellers and entertainers. In the end, the tunnel was closed two years later, used at night, before it was finally closed entirely and fell into dereliction for decades.</p><p>It was only when the underground railway came to London in the 1880s that the Thames Tunnel found and achieved a measure of real usefulness. It was bought in 1869 by the East London Railway, who found it to be in such excellent condition that it was immediately pressed into service as a route for passenger trains heading east. The tunnel became, and remains, part of the London Underground network.</p></div>
</div>
</div>
<div class="questions-container" id="questions-container">
<div class="section-title">Questions 1-7</div>
<div class="instructions">Do the following statements agree with the information given in Reading Passage 1?</div>
<div class="instructions">In boxes 1-7 on your answer sheet, write:<br/>
                TRUE - if the statement agrees with the information<br/>
                FALSE - if the statement contradicts the information<br/>
                NOT GIVEN - if there is no information on this
            </div>
<div class="question-group">
<div class="question" id="q1">
<div class="question-title">
<div class="question-number">1</div>
<div class="question-text">In the early 19th century, the port of London was considered a safer destination than other ports. </div>
</div>
<div class="options">
<label class="option">
<input name="q1" type="radio" value="TRUE"/> TRUE
                        </label>
<label class="option">
<input name="q1" type="radio" value="FALSE"/> FALSE
                        </label>
<label class="option">
<input name="q1" type="radio" value="NOT GIVEN"/> NOT GIVEN
                        </label>
</div>
</div>
<div class="question" id="q2">
<div class="question-title">
<div class="question-number">2</div>
<div class="question-text">London Bridge provided quick access for cargo being sent to southern Britain. </div>
</div>
<div class="options">
<label class="option">
<input name="q2" type="radio" value="TRUE"/> TRUE
                        </label>
<label class="option">
<input name="q2" type="radio" value="FALSE"/> FALSE
                        </label>
<label class="option">
<input name="q2" type="radio" value="NOT GIVEN"/> NOT GIVEN
                        </label>
</div>
</div>
<div class="question" id="q3">
<div class="question-title">
<div class="question-number">3</div>
<div class="question-text">It was generally believed that a new river crossing would be profitable. </div>
</div>
<div class="options">
<label class="option">
<input name="q3" type="radio" value="TRUE"/> TRUE
                        </label>
<label class="option">
<input name="q3" type="radio" value="FALSE"/> FALSE
                        </label>
<label class="option">
<input name="q3" type="radio" value="NOT GIVEN"/> NOT GIVEN
                        </label>
</div>
</div>
<div class="question" id="q4">
<div class="question-title">
<div class="question-number">4</div>
<div class="question-text">Building a second bridge crossing was initially considered to be the best solution.</div>
</div>
<div class="options">
<label class="option">
<input name="q4" type="radio" value="TRUE"/> TRUE
                        </label>
<label class="option">
<input name="q4" type="radio" value="FALSE"/> FALSE
                        </label>
<label class="option">
<input name="q4" type="radio" value="NOT GIVEN"/> NOT GIVEN
                        </label>
</div>
</div>
<div class="question" id="q5">
<div class="question-title">
<div class="question-number">5</div>
<div class="question-text">It was believed that coal could be found under the River Thames.</div>
</div>
<div class="options">
<label class="option">
<input name="q5" type="radio" value="TRUE"/> TRUE
                        </label>
<label class="option">
<input name="q5" type="radio" value="FALSE"/> FALSE
                        </label>
<label class="option">
<input name="q5" type="radio" value="NOT GIVEN"/> NOT GIVEN
                        </label>
</div>
</div>
<div class="question" id="q6">
<div class="question-title">
<div class="question-number">6</div>
<div class="question-text">The Thames Archway Company was the first group to try tunnelling below the Thames.</div>
</div>
<div class="options">
<label class="option">
<input name="q6" type="radio" value="TRUE"/> TRUE
                        </label>
<label class="option">
<input name="q6" type="radio" value="FALSE"/> FALSE
                        </label>
<label class="option">
<input name="q6" type="radio" value="NOT GIVEN"/> NOT GIVEN
                        </label>
</div>
</div>
<div class="question" id="q7">
<div class="question-title">
<div class="question-number">7</div>
<div class="question-text">Some of Trevithick's men were injured during a mudslide at his tunnel. </div>
</div>
<div class="options">
<label class="option">
<input name="q7" type="radio" value="TRUE"/> TRUE
                        </label>
<label class="option">
<input name="q7" type="radio" value="FALSE"/> FALSE
                        </label>
<label class="option">
<input name="q7" type="radio" value="NOT GIVEN"/> NOT GIVEN
                        </label>
</div>
</div>
<div class="question" id="q8">
<div class="question-title">
<div class="question-number">8</div>
<div class="question-text">The Thames Archway Company ran out of money to finance the tunnel project</div>
</div>
<div class="options">
<label class="option">
<input name="q8" type="radio" value="TRUE"/> TRUE
                        </label>
<label class="option">
<input name="q8" type="radio" value="FALSE"/> FALSE
                        </label>
<label class="option">
<input name="q8" type="radio" value="NOT GIVEN"/> NOT GIVEN
                        </label>
</div>
</div>
</div>
<div class="section-title">Questions 9-13</div>
<div class="instructions">Complete the notes below. Choose ONE WORD ONLY from the passage for each answer.</div>
<div class="question-group">
<div class="question" id="q9">
<div class="question-title">
<div class="question-number">9</div>
<div class="question-text">Brunel noticed how a kind of<input class="fill-in-the-blank" name="q9" type="text"/> made its tunnels in wood.</div>
</div>
</div>
<div class="question" id="q10">
<div class="question-title">
<div class="question-number">10</div>
<div class="question-text">Brunel planned to build a shallow tunnel so the earth would have a higher content of <input class="fill-in-the-blank" name="q10" type="text"/> </div>
</div>
</div>
<div class="question" id="q11">
<div class="question-title">
<div class="question-number">11</div>
<div class="question-text">The miners suffered from <input class="fill-in-the-blank" name="q11" type="text"/>because of pollution in the tunnels. </div>
</div>
</div>
<div class="question" id="q12">
<div class="question-title">
<div class="question-number">12</div>
<div class="question-text">Lighting problems led to several <input class="fill-in-the-blank" name="q12" type="text"/></div>
</div>
</div>
<div class="question" id="q13">
<div class="question-title">
<div class="question-number">13</div>
<div class="question-text">Brunel did not have enough money to repay his debt to the<input class="fill-in-the-blank" name="q13" type="text"/></div>
</div>
</div>
</div>
</div>
</main>
<footer>
<div class="progress-container" id="progress-container">
</div>
<div class="action-buttons">
<button class="btn-secondary" id="reset-btn">Reset Answers</button>
<button class="btn-primary" id="submit-btn">Submit Answers</button>
</div>
</footer>
<div class="feedback-overlay" id="feedback-overlay">
<div class="feedback-container" id="feedback-container">
<div class="feedback-header">
<div class="feedback-title">
<i class="fas fa-chart-bar"></i> Your Results
                    <span class="score-display" id="score-display">0/13</span>
</div>
<button id="close-feedback" title="Close"><i class="fas fa-times"></i></button>
</div>
<div class="feedback-body" id="feedback-body">
</div>
</div>
</div>
<script>
        // Timer functionality
        let timerInterval;
        let seconds = 1200; // 20 minutes
        let timerRunning = false;
        
        const timerDisplay = document.getElementById('timer');
        const startTimer = document.getElementById('start-timer');
        const pauseTimer = document.getElementById('pause-timer');
        const resetTimer = document.getElementById('reset-timer');
        
        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60).toString().padStart(2, '0');
            const secs = (seconds % 60).toString().padStart(2, '0');
            return `${mins}:${secs}`;
        }
        
        function updateTimer() {
            timerDisplay.textContent = formatTime(seconds);
            if (seconds <= 0) {
                clearInterval(timerInterval);
                timerRunning = false;
                document.getElementById('submit-btn').click();
            }
        }
        
        startTimer.addEventListener('click', () => {
            if (!timerRunning) {
                timerRunning = true;
                timerInterval = setInterval(() => {
                    seconds--;
                    updateTimer();
                }, 1000);
            }
        });
        
        pauseTimer.addEventListener('click', () => {
            if (timerRunning) {
                clearInterval(timerInterval);
                timerRunning = false;
            }
        });
        
        resetTimer.addEventListener('click', () => {
            clearInterval(timerInterval);
            timerRunning = false;
            seconds = 1200;
            updateTimer();
        });
        
        // Night mode toggle
        const nightModeToggle = document.getElementById('night-mode-toggle');
        nightModeToggle.addEventListener('click', () => {
            document.body.classList.toggle('night-mode');
            const icon = nightModeToggle.querySelector('i');
            if (document.body.classList.contains('night-mode')) {
                icon.classList.remove('fa-moon');
                icon.classList.add('fa-sun');
            } else {
                icon.classList.remove('fa-sun');
                icon.classList.add('fa-moon');
            }
        });
        
        // Create progress indicators
        const progressContainer = document.getElementById('progress-container');
        for (let i = 1; i <= 13; i++) {
            const progressItem = document.createElement('div');
            progressItem.className = 'progress-item';
            progressItem.textContent = i;
            progressItem.dataset.question = i;
            progressContainer.appendChild(progressItem);
            
            progressItem.addEventListener('click', () => {
                const questionElement = document.getElementById(`q${i}`);
                if (questionElement) {
                    questionElement.scrollIntoView({ behavior: 'smooth' });
                }
            });
        }
        
        // Text highlighting functionality
        let highlightTooltip = null;

        function handleMouseUp(e) {
            const container = e.currentTarget;
            const selection = window.getSelection();
            if (selection.toString().trim() !== '' && container.contains(selection.anchorNode)) {
                const range = selection.getRangeAt(0);
                const rect = range.getBoundingClientRect();

                if (highlightTooltip) {
                    highlightTooltip.remove();
                    highlightTooltip = null;
                }

                highlightTooltip = document.createElement('div');
                highlightTooltip.className = 'highlight-tooltip';
                highlightTooltip.innerHTML = '<i class="fas fa-highlighter"></i> Highlight';
                highlightTooltip.style.position = 'fixed';
                highlightTooltip.style.top = `${rect.top - 40}px`;
                highlightTooltip.style.left = `${rect.left}px`;
                document.body.appendChild(highlightTooltip);

                highlightTooltip.addEventListener('click', () => {
                    const span = document.createElement('span');
                    span.className = 'highlight';
                    span.appendChild(range.extractContents());
                    range.insertNode(span);
                    selection.removeAllRanges();
                    highlightTooltip.remove();
                    highlightTooltip = null;
                });
            }
        }

        document.getElementById('passage-text').addEventListener('mouseup', handleMouseUp);
        document.getElementById('questions-container').addEventListener('mouseup', handleMouseUp);
        
        document.addEventListener('mousedown', (e) => {
            if (highlightTooltip && !highlightTooltip.contains(e.target)) {
                highlightTooltip.remove();
                highlightTooltip = null;
                window.getSelection().removeAllRanges();
            }
        });
        
        // Track answered questions
        const questions = document.querySelectorAll('.question');
        const progressItems = document.querySelectorAll('.progress-item');
        
        function updateProgress() {
            let answeredCount = 0;
            
            questions.forEach((question, index) => {
                const questionNumber = index + 1;
                let answered = false;
                
                if (questionNumber <= 8) {
                    const selectedOption = question.querySelector('input:checked');
                    answered = selectedOption !== null;
                } else {
                    const input = question.querySelector('input[type="text"]');
                    answered = input.value.trim() !== '';
                }
                
                if (answered) {
                    question.classList.add('answered');
                    progressItems[index].classList.add('completed');
                    answeredCount++;
                } else {
                    question.classList.remove('answered');
                    progressItems[index].classList.remove('completed');
                }
            });
            
            return answeredCount;
        }
        
        document.querySelectorAll('input[type="radio"], input[type="text"]').forEach(input => {
            input.addEventListener('change', updateProgress);
            input.addEventListener('input', updateProgress);
        });
        
        // Reset button
        document.getElementById('reset-btn').addEventListener('click', () => {
            document.querySelectorAll('input[type="radio"]').forEach(radio => {
                radio.checked = false;
            });
            
            document.querySelectorAll('input[type="text"]').forEach(input => {
                input.value = '';
            });
            
            document.querySelectorAll('.highlight').forEach(highlight => {
                const parent = highlight.parentNode;
                while (highlight.firstChild) {
                    parent.insertBefore(highlight.firstChild, highlight);
                }
                parent.removeChild(highlight);
                parent.normalize();
            });
            
            updateProgress();
            document.getElementById('feedback-overlay').style.display = 'none';
        });
        
        // Submit and Feedback functionality
        const feedbackOverlay = document.getElementById('feedback-overlay');
        const closeFeedbackBtn = document.getElementById('close-feedback');

        document.getElementById('submit-btn').addEventListener('click', () => {
            console.log("Submit button clicked!"); // Debugging log
            pauseTimer.click();
            
            const answers = {
                1: 'NOT GIVEN', 2: 'FALSE', 3: 'TRUE', 4: 'FALSE', 5: 'NOT GIVEN', 6: 'TRUE', 7: 'NOT GIVEN',
                8: 'people', 9: 'worm', 10: 'clay', 11: 'headaches', 12: 'accidents', 13: 'government'
            };
            
            const explanations = {
  1: "The passage does not state whether a second bridge would have obstructed ships, so the answer is NOT GIVEN.",
  2: "Trevithick's tunnelling shield idea is mentioned, but the passage says it was unsuccessful, making the statement FALSE.",
  3: "Marc Brunel was inspired by the way a shipworm bored through timber, which supports the statement.",
  4: "The passage clearly mentions that the air was foul, not excellent, so the statement is FALSE.",
  5: "There is no mention of lighting making it easy to work, so the answer is NOT GIVEN.",
  6: "It is mentioned that the work was hot and humid and that many workers left because of the conditions, which supports the statement.",
  7: "It is stated that additional government funding was needed to finish the tunnel, so the idea that Brunel did it alone is NOT GIVEN.",
  8: "The passage says the tunnel was eventually used by pedestrians and then as part of the railway system.",
  9: "Brunel was inspired by a worm, specifically the shipworm (Teredo navalis).",
  10: "Brunel had hoped to dig through clay, which was soft but stable and ideal for tunnelling.",
  11: "Workers suffered from headaches, which is mentioned in connection with poor air quality and methane gas.",
  12: "Several fatal accidents occurred during construction, including drownings and explosions.",
  13: "The British government eventually provided funding to complete the tunnel."
};

            
           const passageReferences = {
  1: "Line 7: 'The main problem with building a bridge was that it would have to be high enough to allow tall-masted ships to sail under it.'",
  2: "Line 12: 'In 1818, a famous engineer called Richard Trevithick tried to dig a tunnel under the Thames near the site of the present-day Tower Bridge. However, the project failed.'",
  3: "Line 15: 'Marc Brunel... had seen a type of shipworm (Teredo navalis) that ate its way through submerged timber, keeping itself safe by lining its hole with a hard secretion as it moved forward.'",
  4: "Line 21: 'The atmosphere was foul – a mixture of sewage and waste from factories.'",
  5: "Line 22: 'The tunnel was hot and humid, and the sewage and other waste that had leaked into the tunnel made workers ill.'",
  6: "Line 23: 'Many of them quit the job.'",
  7: "Line 28: 'Work only resumed after the British government agreed to provide money to complete the project.'",
  8: "Line 29–30: 'The tunnel was finally opened to the public in 1843. It was used by pedestrians for a number of years, and later became part of the railway system.'",
  9: "Line 15–16: 'Marc Brunel... had seen a type of shipworm... Brunel invented a mechanical version of the worm’s jaws...'",
  10: "Line 17: 'He had hoped to tunnel through clay, which was soft but stable.'",
  11: "Line 21–22: 'The atmosphere was foul... Explosive methane gas accumulated... The methane also caused frequent headaches.'",
  12: "Line 26: 'Flooding and explosive blasts were a constant risk and many workers died in accidents.'",
  13: "Line 28: 'Work only resumed after the British government agreed to provide money to complete the project.'"
};
            
            let correctCount = 0;
            const feedbackBody = document.getElementById('feedback-body');
            feedbackBody.innerHTML = ''; 
            
            for (let i = 1; i <= 13; i++) {
                let userAnswer, isCorrect, questionHTML;
                const feedbackItem = document.createElement('div');
                feedbackItem.className = 'feedback-item';
                
                const questionDiv = document.querySelector(`#q${i} .question-text`);

                if (i <= 7) {
                    const selectedOption = document.querySelector(`input[name="q${i}"]:checked`);
                    userAnswer = selectedOption ? selectedOption.value : 'Not answered';
                    isCorrect = userAnswer === answers[i];
                    questionHTML = questionDiv.textContent;
                } else {
                    const input = document.querySelector(`input[name="q${i}"]`);
                    userAnswer = input.value.trim();
                    isCorrect = userAnswer.toLowerCase() === answers[i].toLowerCase();
                    // Recreate the question with the correct answer filled in
                    questionHTML = questionDiv.innerHTML.replace(/<input.*?>/, `<strong><em>${answers[i]}</em></strong>`);
                }
                
                if (isCorrect) correctCount++;
                
                feedbackItem.innerHTML = `
                    <div class="feedback-question">
                        <span class="${isCorrect ? 'correct' : 'incorrect'}">Question ${i}:</span>
                        ${isCorrect ? `<i class="fas fa-check correct" style="margin-left: 5px;"></i>` : `<i class="fas fa-times incorrect" style="margin-left: 5px;"></i>`}
                    </div>
                    <p><em>${questionHTML}</em></p>
                    <div class="feedback-answer">
                        <strong>Your answer:</strong> ${userAnswer || 'Not answered'}<br>
                        ${!isCorrect ? `<strong>Correct answer:</strong> ${answers[i]}` : ''}
                    </div>
                    <div class="feedback-explanation">
                        <strong>Explanation:</strong> ${explanations[i]}
                    </div>
                    <div class="feedback-passage">
                        <strong>Relevant passage:</strong> "${passageReferences[i]}"
                    </div>
                `;
                
                feedbackBody.appendChild(feedbackItem);
            }
            
            document.getElementById('score-display').textContent = `${correctCount}/13`;
            feedbackOverlay.style.display = 'flex'; // This line makes the overlay visible
            console.log("Feedback overlay display set to flex."); // Debugging log
        });

        closeFeedbackBtn.addEventListener('click', () => {
            feedbackOverlay.style.display = 'none';
        });

        feedbackOverlay.addEventListener('click', (e) => {
            if (e.target === feedbackOverlay) {
                feedbackOverlay.style.display = 'none';
            }
        });

        // Initialize timer display and progress
        updateTimer();
        updateProgress();
    </script>
</body>
</html>
